<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Mstdlib-1.0.0: Process Open (popen)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mstdlib-1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__m__popen.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Process Open (popen)<div class="ingroups"><a class="el" href="group__m__thread.html">Threading Support</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gacbe8efe464334f73c46bca8c78891ef2"><td class="memItemLeft" align="right" valign="top">typedef struct M_popen_handle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a></td></tr>
<tr class="separator:gacbe8efe464334f73c46bca8c78891ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga206820e525551ea8d48b0902cb76d634"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a> { <br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga206820e525551ea8d48b0902cb76d634af0250b9c7b66337a0d77b1b11867b733">M_POPEN_FD_READ</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga206820e525551ea8d48b0902cb76d634a06e5379f0090306474790d2f3d76f72a">M_POPEN_FD_WRITE</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga206820e525551ea8d48b0902cb76d634a161ab5ab2695ad88e07b1e760b266f93">M_POPEN_FD_ERR</a>
<br/>
 }</td></tr>
<tr class="separator:ga206820e525551ea8d48b0902cb76d634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74da94cfd9b5a63b4d9a3c221da49c8c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> { <br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca1e80683df0e4bcb0f43b119061446327">M_POPEN_ERR_NONE</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca5ac091a5e4ddb6dc5360b06050e7ef00">M_POPEN_ERR_INVALIDUSE</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8cabd2507157872cb3fcad7ab8764caf23a">M_POPEN_ERR_CMDNOTFOUND</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8cafff2f993b156a993f0d423a8c6502571">M_POPEN_ERR_PERM</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8cadd6576437c249abb2945433f976e8edb">M_POPEN_ERR_NOEXEC</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca59c2d469e8ee6e397283e0ea12bc1d85">M_POPEN_ERR_KILLSIGNAL</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca226ba899046f869afa1c5034cf284327">M_POPEN_ERR_PIPE</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca6d417fec9f9574f256603ba0960ee4c4">M_POPEN_ERR_WAIT</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#gga74da94cfd9b5a63b4d9a3c221da49c8ca64491e8530ead7012156fb0fa8c23377">M_POPEN_ERR_SPAWN</a>
<br/>
 }</td></tr>
<tr class="separator:ga74da94cfd9b5a63b4d9a3c221da49c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff990ce74d17ddb884b46d39a2e85301"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#gaff990ce74d17ddb884b46d39a2e85301">M_popen_status_t</a> { <br/>
&#160;&#160;<a class="el" href="group__m__popen.html#ggaff990ce74d17ddb884b46d39a2e85301a9d89c7f30bcbf52b4232ae9a4c4905d7">M_POPEN_STATUS_RUNNING</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#ggaff990ce74d17ddb884b46d39a2e85301aaea82ad95ac13996f521e796a3c1756d">M_POPEN_STATUS_ERROR</a>, 
<br/>
&#160;&#160;<a class="el" href="group__m__popen.html#ggaff990ce74d17ddb884b46d39a2e85301a5d18f575b18589ea1f713993c64273f2">M_POPEN_STATUS_DONE</a>
<br/>
 }</td></tr>
<tr class="separator:gaff990ce74d17ddb884b46d39a2e85301"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8ab4a90fa03b2404014afda39cf53159"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga8ab4a90fa03b2404014afda39cf53159">M_popen</a> (const char *cmd, <a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *errorid)</td></tr>
<tr class="separator:ga8ab4a90fa03b2404014afda39cf53159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadacf94312c0ff7a9d00d43f7fa7430f5"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#gadacf94312c0ff7a9d00d43f7fa7430f5">M_popen_read</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp, <a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a> fd, char *out, size_t out_len, M_uint64 timeout_ms)</td></tr>
<tr class="separator:gadacf94312c0ff7a9d00d43f7fa7430f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa2b8a2a213c6c73a8f36f156da2639cd"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#gaa2b8a2a213c6c73a8f36f156da2639cd">M_popen_write</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp, <a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a> fd, const char *in, size_t in_len)</td></tr>
<tr class="separator:gaa2b8a2a213c6c73a8f36f156da2639cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94fb3f03b98ef01b36a749156f122897"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga94fb3f03b98ef01b36a749156f122897">M_popen_closefd</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp, <a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a> fd)</td></tr>
<tr class="separator:ga94fb3f03b98ef01b36a749156f122897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a2626b422232807f1bab2eb78ca16a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__popen.html#gaff990ce74d17ddb884b46d39a2e85301">M_popen_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga2a2626b422232807f1bab2eb78ca16a1">M_popen_check</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp)</td></tr>
<tr class="separator:ga2a2626b422232807f1bab2eb78ca16a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd31ed7b7b0cbb27f0d0878ff08984e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#gacd31ed7b7b0cbb27f0d0878ff08984e0">M_popen_close_ex</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp, char **stdout_buf, size_t *stdout_buf_len, char **stderr_buf, size_t *stderr_buf_len, <a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *errorid, M_uint64 timeout)</td></tr>
<tr class="separator:gacd31ed7b7b0cbb27f0d0878ff08984e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42b253591e9e19576d9afa79aabe7d57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close</a> (<a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *mp, <a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *errorid)</td></tr>
<tr class="separator:ga42b253591e9e19576d9afa79aabe7d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga202a82a26bb29be0439da7564b996b9e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__popen.html#ga202a82a26bb29be0439da7564b996b9e">M_popen_strerror</a> (<a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> err)</td></tr>
<tr class="separator:ga202a82a26bb29be0439da7564b996b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Open and interact with a process.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>       *data = <span class="stringliteral">&quot;&lt;x&gt;&lt;t&gt;data&lt;/t&gt;&lt;/x&gt;&quot;</span></div>
<div class="line"><a class="code" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a>     mperr;</div>
<div class="line"><a class="code" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a>  mp;</div>
<div class="line"><a class="code" href="group__m__popen.html#gaff990ce74d17ddb884b46d39a2e85301">M_popen_status_t</a>  status;</div>
<div class="line"><span class="keywordtype">int</span>               retval;</div>
<div class="line"><span class="keywordtype">char</span>             *stdout_buf     = NULL;</div>
<div class="line"><span class="keywordtype">size_t</span>            stdout_buf_len = 0;</div>
<div class="line"><span class="keywordtype">char</span>             *stderr_buf     = NULL;</div>
<div class="line"><span class="keywordtype">size_t</span>            stderr_buf_len = 0;</div>
<div class="line"></div>
<div class="line">mp = <a class="code" href="group__m__popen.html#ga8ab4a90fa03b2404014afda39cf53159">M_popen</a>(<span class="stringliteral">&quot;curl &lt;url&gt;&quot;</span>, &amp;mperr);</div>
<div class="line"><span class="keywordflow">if</span> (mp == NULL) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;m_popen failed: %s\n&quot;</span>, <a class="code" href="group__m__popen.html#ga202a82a26bb29be0439da7564b996b9e">M_popen_strerror</a>(mperr));</div>
<div class="line">    <span class="keywordflow">return</span> M_FALSE;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;Process spawned....\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">retval = <a class="code" href="group__m__popen.html#gaa2b8a2a213c6c73a8f36f156da2639cd">M_popen_write</a>(mp, <a class="code" href="group__m__popen.html#gga206820e525551ea8d48b0902cb76d634a06e5379f0090306474790d2f3d76f72a">M_POPEN_FD_WRITE</a>, data, <a class="code" href="group__m__str__check.html#gabebfa875d1ada2b43f52b9344b0844d0">M_str_len</a>(data));</div>
<div class="line"><span class="keywordflow">if</span> (retval &lt;= 0) {</div>
<div class="line">    <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;M_popen_write failed, retval = %d\n&quot;</span>, retval);</div>
<div class="line">    <a class="code" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close</a>(mp, &amp;mperr);</div>
<div class="line">    <span class="keywordflow">return</span> M_FALSE;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">/ * Close file descriptor to let process know we<span class="stringliteral">&#39;re done * /</span></div>
<div class="line"><span class="stringliteral">if (!M_popen_closefd(mp, M_POPEN_FD_WRITE)) {</span></div>
<div class="line"><span class="stringliteral">    M_printf(&quot;M_popen_closefd() failed\n&quot;);</span></div>
<div class="line"><span class="stringliteral">    M_popen_close(mp, &amp;mperr);</span></div>
<div class="line"><span class="stringliteral">    return M_FALSE;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">M_printf(&quot;Wrote process stream....\n&quot;);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">while ((status=M_popen_check(mp)) == M_POPEN_STATUS_RUNNING) {</span></div>
<div class="line"><span class="stringliteral">    M_thread_sleep(50000);</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">if (status == M_POPEN_STATUS_ERROR) {</span></div>
<div class="line"><span class="stringliteral">    retval = M_popen_close(mp, &amp;mperr);</span></div>
<div class="line"><span class="stringliteral">    printf(&quot;Error during M_popen_check(): %d: %s\n&quot;, retval, M_popen_strerror(mperr));</span></div>
<div class="line"><span class="stringliteral">    return M_FALSE;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">M_printf(&quot;Process done...\n&quot;);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">retval = M_popen_close_ex(mp, &amp;stdout_buf, &amp;stdout_buf_len, &amp;stderr_buf, &amp;stderr_buf_len, &amp;mperr, 0);</span></div>
<div class="line"><span class="stringliteral">if (retval &lt; 0) {</span></div>
<div class="line"><span class="stringliteral">    M_printf(&quot;error: %s\n&quot;, M_popen_strerror(mperr));</span></div>
<div class="line"><span class="stringliteral">    return M_FALSE;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">M_printf(&quot;stdout: %d:\n%s\n&quot;, (int)stdout_buf_len, stdout_buf);</span></div>
<div class="line"><span class="stringliteral">M_printf(&quot;stderr: %d:\n%s\n&quot;, (int)stderr_buf_len, stderr_buf);</span></div>
<div class="line"><span class="stringliteral">M_free(stdout_buf);</span></div>
<div class="line"><span class="stringliteral">M_free(stderr_buf);</span></div>
<div class="line"><span class="stringliteral">M_printf(&quot;return code: %d\n&quot;, retval);</span></div>
</div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gacbe8efe464334f73c46bca8c78891ef2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct M_popen_handle <a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga206820e525551ea8d48b0902cb76d634"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Types of file descriptors that can be retrieved and used </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga206820e525551ea8d48b0902cb76d634af0250b9c7b66337a0d77b1b11867b733"></a>M_POPEN_FD_READ</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga206820e525551ea8d48b0902cb76d634a06e5379f0090306474790d2f3d76f72a"></a>M_POPEN_FD_WRITE</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga206820e525551ea8d48b0902cb76d634a161ab5ab2695ad88e07b1e760b266f93"></a>M_POPEN_FD_ERR</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga74da94cfd9b5a63b4d9a3c221da49c8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Possible error reason codes </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca1e80683df0e4bcb0f43b119061446327"></a>M_POPEN_ERR_NONE</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca5ac091a5e4ddb6dc5360b06050e7ef00"></a>M_POPEN_ERR_INVALIDUSE</em>&#160;</td><td class="fielddoc">
<p>invalid API usage </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8cabd2507157872cb3fcad7ab8764caf23a"></a>M_POPEN_ERR_CMDNOTFOUND</em>&#160;</td><td class="fielddoc">
<p>command not found </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8cafff2f993b156a993f0d423a8c6502571"></a>M_POPEN_ERR_PERM</em>&#160;</td><td class="fielddoc">
<p>permission denied </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8cadd6576437c249abb2945433f976e8edb"></a>M_POPEN_ERR_NOEXEC</em>&#160;</td><td class="fielddoc">
<p>file not executable </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca59c2d469e8ee6e397283e0ea12bc1d85"></a>M_POPEN_ERR_KILLSIGNAL</em>&#160;</td><td class="fielddoc">
<p>killed by signal </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca226ba899046f869afa1c5034cf284327"></a>M_POPEN_ERR_PIPE</em>&#160;</td><td class="fielddoc">
<p>pipe creation failed </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca6d417fec9f9574f256603ba0960ee4c4"></a>M_POPEN_ERR_WAIT</em>&#160;</td><td class="fielddoc">
<p>attempting to check process status failed </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga74da94cfd9b5a63b4d9a3c221da49c8ca64491e8530ead7012156fb0fa8c23377"></a>M_POPEN_ERR_SPAWN</em>&#160;</td><td class="fielddoc">
<p>fork failed </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="gaff990ce74d17ddb884b46d39a2e85301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__popen.html#gaff990ce74d17ddb884b46d39a2e85301">M_popen_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Status codes for command being executed </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggaff990ce74d17ddb884b46d39a2e85301a9d89c7f30bcbf52b4232ae9a4c4905d7"></a>M_POPEN_STATUS_RUNNING</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaff990ce74d17ddb884b46d39a2e85301aaea82ad95ac13996f521e796a3c1756d"></a>M_POPEN_STATUS_ERROR</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggaff990ce74d17ddb884b46d39a2e85301a5d18f575b18589ea1f713993c64273f2"></a>M_POPEN_STATUS_DONE</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8ab4a90fa03b2404014afda39cf53159"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a>* M_popen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *&#160;</td>
          <td class="paramname"><em>errorid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the specified command and open stdin (write), stdout (read), and stderr (read) file descriptors for communication.</p>
<p>Must call <a class="el" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close()</a> to clean up the returned handle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>Command to execute. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errorid</td><td>Pointer to store error id if an error occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL on failure, M_popen_handle_t on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gadacf94312c0ff7a9d00d43f7fa7430f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t M_popen_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a>&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read from a file descriptor</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>Open M_popen_t object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>Which FD to read from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Buffer to hold read data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_len</td><td>Length of out buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_ms</td><td>Time in ms to wait for data. M_TIMEOUT_INF will cause this to block. Note: Windows only has 15 ms resolution.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, -2 if fd was closed, 0 if a timeout occurred and no bytes were read, otherwise number of bytes read. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa2b8a2a213c6c73a8f36f156da2639cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t M_popen_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a>&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>in_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write to a file descriptor</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mp</td><td>Open M_popen_t object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>Which FD to write to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>Buffer to holding data to be written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_len</td><td>Length of data to be written.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, otherwise number of bytes written. </dd></dl>

</div>
</div>
<a class="anchor" id="ga94fb3f03b98ef01b36a749156f122897"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int M_popen_closefd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga206820e525551ea8d48b0902cb76d634">M_popen_fd_t</a>&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the provided file descriptor.</p>
<p>This is used mainly to close the stdin stream to signal the command being executed that there is no more data left to be read. Any file open file descriptors are automatically closed by <a class="el" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mp</td><td>Open M_popen_t object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>Which FD to close.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2a2626b422232807f1bab2eb78ca16a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__popen.html#gaff990ce74d17ddb884b46d39a2e85301">M_popen_status_t</a> M_popen_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks the current state of the command being executed and returns a code identifying the state.</p>
<p>Even if the state returns DONE or ERROR, <a class="el" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close()</a> must be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>Open M_popen_t object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_popen_status_t code. </dd></dl>

</div>
</div>
<a class="anchor" id="gacd31ed7b7b0cbb27f0d0878ff08984e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int M_popen_close_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>stdout_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>stdout_buf_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>stderr_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>stderr_buf_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *&#160;</td>
          <td class="paramname"><em>errorid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the M_popen_t object.</p>
<p>This will perform a blocking wait for the process to exit before returning control to the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>M_popen_t object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stdout_buf</td><td>Optional parameter. Will return allocated buffer containing the contents of the process's stdout. If specified, must also specify stdout_buf_len. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stdout_buf_len</td><td>Optional parameter. Will return the length of stdout_buf. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stderr_buf</td><td>Optional parameter. Will return allocated buffer containing the contents of the process's stderr. If specified, must also specify stderr_buf_len. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stderr_buf_len</td><td>Optional parameter. Will return the length of stderr_buf. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errorid</td><td>if an error has occurred, will populate with a reason code. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Time in ms to wait for the processes to exit. If the process has not finished after the timeout expires it will be killed. M_TIMEOUT_INF will cause this to block until the process exits. Note: the time out only has 15 ms resolution.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, -2 on timeout, otherwise the exit code from the process. </dd></dl>

</div>
</div>
<a class="anchor" id="ga42b253591e9e19576d9afa79aabe7d57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int M_popen_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#gacbe8efe464334f73c46bca8c78891ef2">M_popen_handle_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a> *&#160;</td>
          <td class="paramname"><em>errorid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the M_popen_t object.</p>
<p>This is a simplified wrapper around <a class="el" href="group__m__popen.html#gacd31ed7b7b0cbb27f0d0878ff08984e0">M_popen_close_ex()</a>. This command blocks forever until the child process is done. If you need to force-kill the process after a given timeout, use <a class="el" href="group__m__popen.html#gacd31ed7b7b0cbb27f0d0878ff08984e0">M_popen_close_ex()</a> instead of this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>M_popen_t object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errorid</td><td>if an error has occurred, will populate with a reason code.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__m__popen.html#gacd31ed7b7b0cbb27f0d0878ff08984e0">M_popen_close_ex</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, otherwise the exit code from the process. </dd></dl>

</div>
</div>
<a class="anchor" id="ga202a82a26bb29be0439da7564b996b9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* M_popen_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__popen.html#ga74da94cfd9b5a63b4d9a3c221da49c8c">M_popen_err_t</a>&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Output human-readable error string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">err</td><td>Error as returned by <a class="el" href="group__m__popen.html#ga8ab4a90fa03b2404014afda39cf53159">M_popen()</a> or <a class="el" href="group__m__popen.html#ga42b253591e9e19576d9afa79aabe7d57">M_popen_close()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string error message. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 16 2018 14:55:14 for Mstdlib-1.0.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
